before_script:
  - apt-get update -qq && apt-get upgrade -y
  - apt-get install -y gcc g++ cmake make
  - apt-get install -y python3-dev python3-venv

stages:
  - build
  - install

build:ubuntu:
  stage: build
  image: ubuntu:latest
  script:
    - make build
  only: 
    - master
    - development
    - TestCI
  except:
    variables:
      - $CI_COMMIT_MESSAGE =~ /WIP/

install:ubuntu:
  stage: debug
  image: ubuntu:latest
  only:
    - tags
    - master
    - development
    - TestCI
  script:
    - make debug
    - make test

install:ubuntu:
  stage: install
  image: ubuntu:latest
  only: 
    - tags
    - TestCI
  script:
    - make install
    